# 快照

快照是Story的图像以及由 Chromatic 捕获云基础设施中的标准化浏览器捕获的一些元数据。快照功能用户界面测试和用户界面审查。

## 快照是如何捕捉的？

::: details 1. 将每个 Story 加载到浏览器视窗的指定位置
Capture Cloud 导航到您发布的 Storybook。它使用我们的标准化浏览器群在您所需的视口并行加载所有 Story。
:::

::: details 2. 等待 Story 渲染
Capture Cloud 使用底层浏览器 API 与我们自己的一套启发式方法相结合来确定组件何时“加载”。Chromatic 的主要启发方法之一是网络“静止”——网络不活动的一段时间，表示所有资源已加载。加载是当前可能的组件渲染时间的最接近的近似值。
:::

::: details 3. 截取屏幕截图并将其裁剪为 UI 尺寸
Chromatic 会适应组件大小进行屏幕截图。它通过测量 Storybook 元素的子节点的边界框#storybook-root或#root以前版本的元素来确定裁剪尺寸。对于原子组件，裁剪可以消除快照周围的负空间，从而减少您必须查看的视觉信息。对于页面，Chromatic 捕获呈现的 UI 的完整宽度和高度。
:::

::: details 4. 保存快照以及构建或分支的先前基线快照之间的差异
每个快照都与一个Story相关联，并用提交、分支和其他相关元数据标记。快照存储在 Chromatic 的云中。对于 UI 测试和 UI 审核，可以对快照进行视觉比较（差异）以识别更改。我们的基础设施能够有效地并行快照每个 Story，无论您有多少个 Story。
:::

